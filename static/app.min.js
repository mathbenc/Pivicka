var currentTheme="light";function themeSetter(){var t=(new Date).getHours();(t>20||t<7)&&($("html").css("background-color","#212121"),$("body").css("background-color","#212121"),$("#logotip").attr("src","./static/images/icon-test-dark-alt-min.png"),$("#logotipWebp").attr("srcset","./static/images/icon-test-dark-alt.webp"),$("#logotipPng").attr("srcset","./static/images/icon-test-dark-alt-min.png"),$("#dataTable").addClass("my-table-dark"),$(".fakeThead").css("background-color","#212121"),$("thead th").css("background-color","#212121"),$("thead th").css("color","white"),$(".modal-content").addClass("elegant-color"),$(".modal-body").addClass("text-white"),currentTheme="dark")}themeSetter();var country="";$.ajax({url:"https://ipinfo.io?token=0b3053efc15e81",type:"get",dataType:"jsonp",success:function(t){country=t.country,colorCountry()}});var region="";function tableBodyCreate(t){var e=document.getElementById("tableBody");$("#dataTable tbody").empty();for(var a=0;a<data.length;a++)if(data[a].region==t||""==t){var o=e.insertRow(),r=o.insertCell();o.setAttribute("class","countryExpand"),o.setAttribute("id",a),r.innerHTML=data[a].slovenianName,r.setAttribute("id",data[a].A2code),(r=o.insertCell()).setAttribute("align","right"),r.setAttribute("class","d-none d-xl-table-cell text-right"),r.innerHTML=data[a].countryPopulation,(r=o.insertCell()).setAttribute("align","right"),r.innerHTML=data[a].infected,(r=o.insertCell()).setAttribute("align","right"),"0"!=data[a].infectedToday&&(r.style.color="#FF0266"),r.innerHTML=data[a].infectedToday,(r=o.insertCell()).setAttribute("align","right"),r.setAttribute("class","d-none d-sm-table-cell text-right"),r.innerHTML=data[a].infectedRatio+"%",(r=o.insertCell()).setAttribute("align","right"),r.innerHTML=data[a].dead,(r=o.insertCell()).setAttribute("align","right"),r.setAttribute("class","d-none d-sm-table-cell text-right"),0!=data[a].deadToday&&(r.style.color="#FF0266"),r.innerHTML=data[a].deadToday,(r=o.insertCell()).setAttribute("align","right"),r.setAttribute("class","d-none d-md-table-cell text-right"),r.innerHTML=data[a].deadRatio+"%",(r=o.insertCell()).setAttribute("align","right"),r.setAttribute("class","d-none d-md-table-cell text-right"),r.innerHTML=data[a].cured,(r=o.insertCell()).setAttribute("align","right"),r.setAttribute("class","d-none d-lg-table-cell text-right"),r.innerHTML=data[a].tests,(r=o.insertCell()).setAttribute("align","right"),r.setAttribute("class","d-none d-lg-table-cell text-right"),r.innerHTML=data[a].testsPerMillion+"%"}$("tbody").show(),colorCountry()}if($("#search").on("keyup",function(){var t=$(this).val().toLowerCase();$("#dataTable tbody tr").filter(function(){$(this).toggle($(this).text().toLowerCase().indexOf(t)>-1)}),colorCountry()}),"True"==goodResponse)tableBodyCreate(region);else{var mainDiv=document.getElementById("mainDiv");mainDiv.innerHTML='<div class="text-center" style="margin-top: 50px !important; color: #ffeb3b"><h1>Dostop do podatkov trenutno ni mogoƒç! üòü</h1><p class="lead">Uporabite alternativne spletne aplikacije za pregled podatkov.<br>üëâ <a href="https://www.arcgis.com/apps/opsdashboard/index.html#/bda7594740fd40299423467b48e9ecf6">COVID-19 Tracker by CSSE</a></p></div>';var footerDiv=document.getElementById("footerDiv")}function colorCountry(){console.log(country);for(var t=$("#dataTable").find("tr"),e=1;e<t.length;e++){t[e].getElementsByTagName("td")[0].getAttribute("id")==country&&(t[e].classList.add("myCountry"),t[e].style.backgroundColor="#ffff72",t[e].style.color="black")}}function switchTheme(){"light"==currentTheme?($("#logotip").attr("src","./static/images/icon-test-dark-alt-min.png"),$("#logotipWebp").attr("srcset","./static/images/icon-test-dark-alt.webp"),$("#logotipPng").attr("srcset","./static/images/icon-test-dark-alt-min.png"),$("html").css("background-color","#212121"),$("body").css("background-color","#212121"),$("#dataTable").addClass("my-table-dark"),$(".fakeThead").css("background-color","#212121"),$("thead th").css("background-color","#212121"),$("thead th").css("color","white"),$(".modal-content").addClass("elegant-color"),$(".modal-body").addClass("text-white"),currentTheme="dark"):($("#logotip").attr("src","./static/images/icon-test-alt-min.png"),$("#logotipWebp").attr("srcset","./static/images/icon-test-alt.webp"),$("#logotipPng").attr("srcset","./static/images/icon-test-alt-min.png"),$("html").css("background-color","white"),$("body").css("background-color","white"),$("#dataTable").removeClass("my-table-dark"),$(".fakeThead").css("background-color","white"),$("thead th").css("background-color","white"),$("thead th").css("color","black"),$(".modal-content").removeClass("elegant-color"),$(".modal-body").removeClass("text-white"),currentTheme="light")}if(new Tablesort(document.getElementById("dataTable"),{descending:!0}),themeSetter(),$(document).on(colorCountry(),"#dataTable",function(){}),$(document).ready(function(){$(document).on("click",".countryExpand",function(){var t=$(this).attr("id");$("#countryDetailsModalTitle").text(data[t].slovenianName),$("#populationModal").text(data[t].countryPopulation),$("#infectedModal").text(data[t].infected),$("#infectedTodayModal").text(data[t].infectedToday),$("#infectedRatioModal").text(data[t].infectedRatio+"%"),$("#deadModal").text(data[t].dead),$("#deadTodayModal").text(data[t].deadToday),$("#deadRatioModal").text(data[t].deadRatio+"%"),$("#curedModal").text(data[t].cured),$("#activeModal").text(data[t].active),$("#criticalModal").text(data[t].critical),$("#countryFlag").attr("src",data[t].flag),$("#countryDensity").text(data[t].density+" P/Km¬≤"),$("#testsModal").text(data[t].tests),$("#testsRatioModal").text(data[t].testsPerMillion+"%"),$("#countryDetailsModal").modal("show"),showGraph(data[t].A2code)})}),$(".tableFixHead").on("scroll",function(t){$(this).scrollTop()>0?$(".fakeThead").addClass("shadows"):$(".fakeThead").removeClass("shadows")}),$(document).ready(function(){$("#logotip").click(function(){switchTheme()})}),"False"==graphResponseFailed)var ctxL=document.getElementById("lineChart").getContext("2d"),myLineChart=new Chart(ctxL,{type:"line",data:{labels:graphData.dates.slice(-graphData.SI.dead.length),datasets:[{label:"Umrli",data:graphData.SI.dead,backgroundColor:["rgba(255, 69, 69, .4)"],borderColor:["rgba(255, 69, 69, .8)"],borderWidth:2},{label:"Oku≈æeni",data:graphData.SI.confirmed,backgroundColor:["rgba(0, 184, 107, .25)"],borderColor:["rgba(0, 184, 107, .5)"],borderWidth:2}]},options:{responsive:!0,scales:{xAxes:[{gridLines:{color:"#ffeb3b",zeroLineColor:"yellow",display:!1}}],yAxes:[{gridLines:{color:"#ffeb3b",zeroLineColor:"#ffffff",display:!1},labels:{color:"yellow",fontColor:"red"}}]},legend:{position:"bottom"},elements:{point:{radius:0}}}}),myGlobalChart=(ctxL=document.getElementById("globalChart").getContext("2d"),new Chart(ctxL,{type:"line",data:{labels:graphData.dates,datasets:[{label:"Umrli",data:graphGlobal.global_deaths,backgroundColor:["rgba(255, 69, 69, .4)"],borderColor:["rgba(255, 69, 69, .8)"],borderWidth:2},{label:"Oku≈æeni",data:graphGlobal.global_confirmed,backgroundColor:["rgba(0, 184, 107, .25)"],borderColor:["rgba(0, 184, 107, .5)"],borderWidth:2}]},options:{responsive:!0,scales:{xAxes:[{gridLines:{color:"#ffeb3b",zeroLineColor:"yellow",display:!1}}],yAxes:[{gridLines:{color:"#ffeb3b",zeroLineColor:"#ffffff",display:!1},labels:{color:"yellow",fontColor:"red"}}]},legend:{position:"bottom"},elements:{point:{radius:0}}}}));else $("#lineChart").remove(),$("#graphModal").remove();function showGraph(t){"False"==graphResponseFailed&&(myLineChart.data.labels=graphData.dates.slice(-graphData[t].confirmed.length),myLineChart.data.datasets[1].data=graphData[t].confirmed,myLineChart.data.datasets[0].data=graphData[t].dead,myLineChart.update())}function modeSwitch(){$("#globeSwitch")[0].classList.toggle("fa-globe-europe"),"Europe"==region?(region="",$("#globeText").text(" Svet  "),$("#globalDeaths").text(globalData.deaths),$("#globalRecovered").text(globalData.recovered),$("#globalCases").text(globalData.cases),"False"==graphResponseFailed&&(myGlobalChart.data.datasets[1].data=graphGlobal.global_confirmed,myGlobalChart.data.datasets[0].data=graphGlobal.global_deaths,myGlobalChart.update(),$("#regionTitle").text("Svet"))):(region="Europe",$("#globeText").text(" Evropa"),$("#globalDeaths").text(europeData.deaths),$("#globalRecovered").text(europeData.recovered),$("#globalCases").text(europeData.cases),"False"==graphResponseFailed&&(myGlobalChart.data.datasets[1].data=graphGlobal.europe_confirmed,myGlobalChart.data.datasets[0].data=graphGlobal.europe_deaths,myGlobalChart.update(),$("#regionTitle").text("Evropa"))),tableBodyCreate(region),colorCountry()}"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js");