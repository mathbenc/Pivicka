var currentTheme="light";function themeSetter(){var t=(new Date).getHours();(t>20||t<7)&&($("html").css("background-color","#212121"),$("body").css("background-color","#212121"),$("#logotip").attr("src","./static/images/icon-test-dark-alt-min.png"),$("#logotipWebp").attr("srcset","./static/images/icon-test-dark-alt.webp"),$("#logotipPng").attr("srcset","./static/images/icon-test-dark-alt-min.png"),$("#dataTable").addClass("my-table-dark"),$(".fakeThead").css("background-color","#212121"),$("thead th").css("background-color","#212121"),$("thead th").css("color","white"),$(".modal-content").addClass("elegant-color"),$(".modal-body").addClass("text-white"),currentTheme="dark")}themeSetter();var country="";$.ajax({url:"https://ipinfo.io?token=0b3053efc15e81",type:"get",dataType:"jsonp",success:function(t){country=t.country,colorCountry()}});var region="";$("#search").on("keyup",function(){var t=$(this).val().toLowerCase();$("#dataTable tbody tr").filter(function(){$(this).toggle($(this).text().toLowerCase().indexOf(t)>-1)}),colorCountry()});var table=document.getElementById("dataTable"),sort=new Tablesort(table,{descending:!0});function tableBodyCreate(t){var e=document.getElementById("tableBody");$("#dataTable tbody").empty();for(var a=0;a<data.length;a++)if(data[a].continent==t||""==t){var o=e.insertRow(),r=o.insertCell();o.setAttribute("class","countryExpand"),o.setAttribute("id",a),r.innerHTML=data[a].translation,r.setAttribute("id",data[a].countryInfo.iso2),(r=o.insertCell()).setAttribute("align","right"),r.setAttribute("class","d-none d-xl-table-cell text-right"),r.innerHTML=data[a].population,(r=o.insertCell()).setAttribute("align","right"),r.setAttribute("class","d-none d-sm-table-cell text-right"),r.innerHTML=data[a].cases,(r=o.insertCell()).setAttribute("align","right"),"0"!=data[a].todayCases&&(r.style.color="#FF0266"),r.innerHTML=data[a].todayCases,(r=o.insertCell()).setAttribute("align","right"),r.setAttribute("class","d-none d-md-table-cell text-right"),r.innerHTML=data[a].casesPerOneMillion,(r=o.insertCell()).setAttribute("align","right"),r.setAttribute("class","d-none d-md-table-cell text-right"),r.innerHTML=data[a].deaths,(r=o.insertCell()).setAttribute("align","right"),0!=data[a].todayDeaths&&(r.style.color="#FF0266"),r.innerHTML=data[a].todayDeaths,(r=o.insertCell()).setAttribute("align","right"),r.setAttribute("class","d-none d-lg-table-cell text-right"),r.innerHTML=data[a].deathsPerOneMillion,(r=o.insertCell()).setAttribute("align","right"),r.setAttribute("class","d-none d-lg-table-cell text-right"),r.innerHTML=data[a].recovered,(r=o.insertCell()).setAttribute("align","right"),r.setAttribute("class","d-none d-md-table-cell text-right"),r.innerHTML=data[a].active,(r=o.insertCell()).setAttribute("align","right"),r.innerHTML=data[a].newTests,(r=o.insertCell()).setAttribute("align","right"),r.setAttribute("class","d-none d-xl-table-cell text-right"),r.innerHTML=data[a].testsPerOneMillion}sort.refresh(),$("tbody").show(),colorCountry()}function colorCountry(){for(var t=$("#dataTable").find("tr"),e=1;e<t.length;e++){t[e].getElementsByTagName("td")[0].getAttribute("id")==country&&(t[e].classList.add("myCountry"),t[e].style.backgroundColor="#ffff72",t[e].style.color="black")}}function switchTheme(){"light"==currentTheme?($("#logotip").attr("src","./static/images/icon-test-dark-alt-min.png"),$("#logotipWebp").attr("srcset","./static/images/icon-test-dark-alt.webp"),$("#logotipPng").attr("srcset","./static/images/icon-test-dark-alt-min.png"),$("html").css("background-color","#212121"),$("body").css("background-color","#212121"),$("#dataTable").addClass("my-table-dark"),$(".fakeThead").css("background-color","#212121"),$("thead th").css("background-color","#212121"),$("thead th").css("color","white"),$(".modal-content").addClass("elegant-color"),$(".modal-body").addClass("text-white"),currentTheme="dark"):($("#logotip").attr("src","./static/images/icon-test-alt-min.png"),$("#logotipWebp").attr("srcset","./static/images/icon-test-alt.webp"),$("#logotipPng").attr("srcset","./static/images/icon-test-alt-min.png"),$("html").css("background-color","white"),$("body").css("background-color","white"),$("#dataTable").removeClass("my-table-dark"),$(".fakeThead").css("background-color","white"),$("thead th").css("background-color","white"),$("thead th").css("color","black"),$(".modal-content").removeClass("elegant-color"),$(".modal-body").removeClass("text-white"),currentTheme="light")}tableBodyCreate(region),themeSetter(),$(document).on(colorCountry(),"#dataTable",function(){}),$(document).ready(function(){$(document).on("click",".countryExpand",function(){var t=$(this).attr("id");$("#countryDetailsModalTitle").text(data[t].translation),$("#populationModal").text(data[t].population),$("#infectedModal").text(data[t].cases),$("#infectedTodayModal").text(data[t].todayCases),$("#infectedRatioModal").text(data[t].casesPerOneMillion),$("#deadModal").text(data[t].deaths),$("#deadTodayModal").text(data[t].todayDeaths),$("#deadRatioModal").text(data[t].deathsPerOneMillion),$("#curedModal").text(data[t].recovered),$("#activeModal").text(data[t].active),$("#criticalModal").text(data[t].critical),$("#countryFlag").attr("src",data[t].countryInfo.flag),$("#testsModal").text(data[t].tests),$("#newTestsModal").text(data[t].newTests),$("#testsRatioModal").text(data[t].testsPerOneMillion),$("#countryDetailsModal").modal("show"),showGraph(data[t].country)})}),$(".tableFixHead").on("scroll",function(t){$(this).scrollTop()>0?$(".fakeThead").addClass("shadows"):$(".fakeThead").removeClass("shadows")}),$(document).ready(function(){$("#logotip").click(function(){switchTheme()})});var ctxL=document.getElementById("lineChart").getContext("2d"),myLineChart=new Chart(ctxL,{type:"line",data:{labels:Object.keys(graphData[0].timeline.cases),datasets:[{label:"Umrli",data:Object.values(graphData[0].timeline.deaths),backgroundColor:["rgba(255, 69, 69, .4)"],borderColor:["rgba(255, 69, 69, 1)"],borderWidth:2},{label:"Ozdraveli",data:Object.values(graphData[0].timeline.recovered),backgroundColor:["rgba(0, 177, 106, .4)"],borderColor:["rgba(0, 177, 106, 1)"],borderWidth:2},{label:"Okuženi",data:Object.values(graphData[0].timeline.cases),backgroundColor:["rgba(247, 202, 24, .4)"],borderColor:["rgba(247, 202, 24, 1)"],borderWidth:2}]},options:{responsive:!0,scales:{xAxes:[{gridLines:{color:"#ffeb3b",zeroLineColor:"yellow",display:!1}}],yAxes:[{gridLines:{color:"#ffeb3b",zeroLineColor:"#ffffff",display:!1},labels:{color:"yellow",fontColor:"red"}}]},legend:{position:"bottom"},elements:{point:{radius:0}}}}),myGlobalChart=(ctxL=document.getElementById("globalChart").getContext("2d"),new Chart(ctxL,{type:"line",data:{labels:Object.keys(graphGlobal.cases),datasets:[{label:"Umrli",data:Object.values(graphGlobal.deaths),backgroundColor:["rgba(255, 69, 69, .4)"],borderColor:["rgba(255, 69, 69, .8)"],borderWidth:2},{label:"Okuženi",data:Object.values(graphGlobal.cases),backgroundColor:["rgba(0, 184, 107, .25)"],borderColor:["rgba(0, 184, 107, .5)"],borderWidth:2}]},options:{responsive:!0,scales:{xAxes:[{gridLines:{color:"#ffeb3b",zeroLineColor:"yellow",display:!1}}],yAxes:[{gridLines:{color:"#ffeb3b",zeroLineColor:"#ffffff",display:!1},labels:{color:"yellow",fontColor:"red"}}]},legend:{position:"bottom"},elements:{point:{radius:0}}}}));function showGraph(t){for(var e=0;e<graphData.length;e++)if(graphData[e].country==t){myLineChart.data.labels=Object.keys(graphData[e].timeline.cases),myLineChart.data.datasets[0].data=Object.values(graphData[e].timeline.deaths),myLineChart.data.datasets[2].data=Object.values(graphData[e].timeline.cases),myLineChart.data.datasets[1].data=Object.values(graphData[e].timeline.recovered),myLineChart.update();break}}function modeSwitch(){if($("#globeSwitch")[0].classList.toggle("fa-globe-europe"),"Europe"==region)region="",$("#globeText").text(" Svet  "),$("#globalDeaths").text(globalData.deaths),$("#globalRecovered").text(globalData.recovered),$("#globalCases").text(globalData.cases),$("#regionTitle").text("Svet");else{region="Europe";for(var t=0;t<europeData.length;t++)"Europe"==europeData[t].continent&&($("#globeText").text(" Evropa"),$("#globalDeaths").text(europeData[t].deaths),$("#globalRecovered").text(europeData[t].recovered),$("#globalCases").text(europeData[t].cases));$("#regionTitle").text("Evropa")}tableBodyCreate(region),colorCountry()}"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js");