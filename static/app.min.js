var currentTheme="light";function themeSetter(){var t=(new Date).getHours();(20<t||t<7)&&($("html").css("background-color","#212121"),$("body").css("background-color","#212121"),$("#logotip").attr("src","./static/images/icon-test-dark-alt-min.png"),$("#logotipWebp").attr("srcset","./static/images/icon-test-dark-alt.webp"),$("#logotipPng").attr("srcset","./static/images/icon-test-dark-alt-min.png"),$("#dataTable").addClass("my-table-dark"),$(".fakeThead").css("background-color","#212121"),$("thead th").css("background-color","#212121"),$("thead th").css("color","white"),$(".modal-content").addClass("elegant-color"),$(".modal-body").addClass("text-white"),currentTheme="dark")}var country="";$.getJSON("https://json.geoiplookup.io",function(t){}).done(function(t){colorCountry(country=t.country_name)});var region="";function tableBodyCreate(t){var e=document.getElementById("dataTable"),a=document.createElement("tbody");$("#dataTable tbody").empty();for(var o=0;o<data.length;o++)if(data[o].region==t||""==t){var r=a.insertRow(),l=r.insertCell();r.setAttribute("class","countryExpand"),r.setAttribute("id",o),l.innerHTML=data[o].slovenianName,l.setAttribute("id",data[o].name),(l=r.insertCell()).setAttribute("align","right"),l.setAttribute("class","d-none d-lg-table-cell text-right"),l.innerHTML=data[o].countryPopulation,(l=r.insertCell()).setAttribute("align","right"),l.innerHTML=data[o].infected,(l=r.insertCell()).setAttribute("align","right"),l.innerHTML=data[o].infectedToday,(l=r.insertCell()).setAttribute("align","right"),l.setAttribute("class","d-none d-sm-table-cell text-right"),l.innerHTML=data[o].infectedRatio+"%",(l=r.insertCell()).setAttribute("align","right"),l.innerHTML=data[o].dead,(l=r.insertCell()).setAttribute("align","right"),l.setAttribute("class","d-none d-sm-table-cell text-right"),l.innerHTML=data[o].deadToday,(l=r.insertCell()).setAttribute("align","right"),l.setAttribute("class","d-none d-md-table-cell text-right"),l.innerHTML=data[o].deadRatio+"%",(l=r.insertCell()).setAttribute("align","right"),l.setAttribute("class","d-none d-md-table-cell text-right"),l.innerHTML=data[o].cured}e.appendChild(a),colorCountry()}function tableCreate(t){var e=["Država","Populacija","Okuženi","Okuženi danes","Obolevnost","Umrli","Umrli danes","Umrljivost","Ozdraveli"],a=["fas fa-flag","","fas fa-biohazard","fas fa-calendar-day","","fas fa-book-dead","","","fas fa-grin-alt"],o=document.getElementById("dataTable"),r=(document.createElement("tbody"),o.createTHead());r.setAttribute("id","tableHead");for(var l=r.insertRow(),d=0;d<e.length;d++){var i=document.createElement("th");i.innerHTML='<div class="d-none d-sm-block">'+e[d]+'</div><div class="d-sm-none"><i class="'+a[d]+'"></i></div>',"Okuženi"==e[d]&&i.setAttribute("data-sort-default",""),0!=d?i.setAttribute("class","text-right col"):(i.setAttribute("class","col"),i.innerHTML="<div>"+e[d]+"</div>"),"Ozdraveli"!=e[d]&&"Umrljivost"!=e[d]||i.setAttribute("class","d-none d-md-table-cell text-right col"),"Obolevnost"!=e[d]&&"Umrli danes"!=e[d]||i.setAttribute("class","d-none d-sm-table-cell text-right col"),"Populacija"==e[d]&&i.setAttribute("class","d-none d-lg-table-cell text-right col"),l.appendChild(i)}tableBodyCreate(t)}if($("#search").on("keyup",function(){var t=$(this).val().toLowerCase();$("#dataTable tbody tr").filter(function(){$(this).toggle(-1<$(this).text().toLowerCase().indexOf(t))}),colorCountry()}),"True"==goodResponse)tableCreate(region);else{var mainDiv=document.getElementById("mainDiv");mainDiv.innerHTML='<div class="text-center" style="margin-top: 50px !important;"><h1>Dostop do podatkov trenutno ni mogoč! 😟</h1><p class="lead">Uporabite alternativne spletne aplikacije za pregled podatkov.<br>👉 <a href="https://www.arcgis.com/apps/opsdashboard/index.html#/bda7594740fd40299423467b48e9ecf6">COVID-19 Tracker by CSSE</a></p></div>';var footerDiv=document.getElementById("footerDiv")}function colorCountry(){for(var t=$("#dataTable").find("tr"),e=1;e<t.length;e++){t[e].getElementsByTagName("td")[0].getAttribute("id")==country&&(t[e].classList.add("myCountry"),t[e].style.backgroundColor="#ffff72",t[e].style.color="black")}}function switchTheme(){currentTheme="light"==currentTheme?($("#logotip").attr("src","./static/images/icon-test-dark-alt-min.png"),$("#logotipWebp").attr("srcset","./static/images/icon-test-dark-alt.webp"),$("#logotipPng").attr("srcset","./static/images/icon-test-dark-alt-min.png"),$("html").css("background-color","#212121"),$("body").css("background-color","#212121"),$("#dataTable").addClass("my-table-dark"),$(".fakeThead").css("background-color","#212121"),$("thead th").css("background-color","#212121"),$("thead th").css("color","white"),$(".modal-content").addClass("elegant-color"),$(".modal-body").addClass("text-white"),"dark"):($("#logotip").attr("src","./static/images/icon-test-alt-min.png"),$("#logotipWebp").attr("srcset","./static/images/icon-test-alt.webp"),$("#logotipPng").attr("srcset","./static/images/icon-test-alt-min.png"),$("html").css("background-color","white"),$("body").css("background-color","white"),$("#dataTable").removeClass("my-table-dark"),$(".fakeThead").css("background-color","white"),$("thead th").css("background-color","white"),$("thead th").css("color","black"),$(".modal-content").removeClass("elegant-color"),$(".modal-body").removeClass("text-white"),"light")}if(new Tablesort(document.getElementById("dataTable"),{descending:!0}),themeSetter(),colorCountry(),$(document).on(colorCountry(),"#dataTable",function(){}),$(document).ready(function(){$(document).on("click",".countryExpand",function(){var t=$(this).attr("id");$("#countryDetailsModalTitle").text(data[t].slovenianName),$("#populationModal").text(data[t].countryPopulation),$("#infectedModal").text(data[t].infected),$("#infectedTodayModal").text(data[t].infectedToday),$("#infectedRatioModal").text(data[t].infectedRatio+"%"),$("#deadModal").text(data[t].dead),$("#deadTodayModal").text(data[t].deadToday),$("#deadRatioModal").text(data[t].deadRatio+"%"),$("#curedModal").text(data[t].cured),$("#activeModal").text(data[t].active),$("#criticalModal").text(data[t].critical),$("#countryFlag").attr("src",data[t].flag),$("#countryDensity").text(data[t].density+" P/Km²"),$("#countryDetailsModal").modal("show"),showGraph(data[t].A2code)})}),$(".tableFixHead").on("scroll",function(t){0<$(this).scrollTop()?$(".fakeThead").addClass("shadows"):$(".fakeThead").removeClass("shadows")}),$(document).ready(function(){$("#logotip").click(function(){switchTheme()})}),"False"==graphResponseFailed)var ctxL=document.getElementById("lineChart").getContext("2d"),myLineChart=new Chart(ctxL,{type:"line",data:{labels:graphData.dates.slice(-graphData.SI.dead.length),datasets:[{label:"Umrli",data:graphData.SI.dead,backgroundColor:["rgba(255, 69, 69, .4)"],borderColor:["rgba(255, 69, 69, .8)"],borderWidth:2},{label:"Okuženi",data:graphData.SI.confirmed,backgroundColor:["rgba(0, 184, 107, .25)"],borderColor:["rgba(0, 184, 107, .5)"],borderWidth:2}]},options:{responsive:!0,scales:{xAxes:[{gridLines:{color:"#ffeb3b",zeroLineColor:"yellow",display:!1}}],yAxes:[{gridLines:{color:"#ffeb3b",zeroLineColor:"#ffffff",display:!1},labels:{color:"yellow",fontColor:"red"}}]},legend:{position:"bottom"},elements:{point:{radius:0}}}}),myGlobalChart=(ctxL=document.getElementById("globalChart").getContext("2d"),new Chart(ctxL,{type:"line",data:{labels:graphData.dates,datasets:[{label:"Umrli",data:graphGlobal.global_deaths,backgroundColor:["rgba(255, 69, 69, .4)"],borderColor:["rgba(255, 69, 69, .8)"],borderWidth:2},{label:"Okuženi",data:graphGlobal.global_confirmed,backgroundColor:["rgba(0, 184, 107, .25)"],borderColor:["rgba(0, 184, 107, .5)"],borderWidth:2}]},options:{responsive:!0,scales:{xAxes:[{gridLines:{color:"#ffeb3b",zeroLineColor:"yellow",display:!1}}],yAxes:[{gridLines:{color:"#ffeb3b",zeroLineColor:"#ffffff",display:!1},labels:{color:"yellow",fontColor:"red"}}]},legend:{position:"bottom"},elements:{point:{radius:0}}}}));else $("#lineChart").remove(),$("#graphModal").remove();function showGraph(t){"False"==graphResponseFailed&&(myLineChart.data.labels=graphData.dates.slice(-graphData[t].confirmed.length),myLineChart.data.datasets[1].data=graphData[t].confirmed,myLineChart.data.datasets[0].data=graphData[t].dead,myLineChart.update())}function modeSwitch(){$("#globeSwitch")[0].classList.toggle("fa-globe-europe"),"Europe"==region?(region="",$("#globeText").text(" Svet  "),$("#globalDeaths").text(globalData.deaths),$("#globalRecovered").text(globalData.recovered),$("#globalCases").text(globalData.cases),"False"==graphResponseFailed&&(myGlobalChart.data.datasets[1].data=graphGlobal.global_confirmed,myGlobalChart.data.datasets[0].data=graphGlobal.global_deaths,myGlobalChart.update(),$("#regionTitle").text("Svet"))):(region="Europe",$("#globeText").text(" Evropa"),$("#globalDeaths").text(europeData.deaths),$("#globalRecovered").text(europeData.recovered),$("#globalCases").text(europeData.cases),"False"==graphResponseFailed&&(myGlobalChart.data.datasets[1].data=graphGlobal.europe_confirmed,myGlobalChart.data.datasets[0].data=graphGlobal.europe_deaths,myGlobalChart.update(),$("#regionTitle").text("Evropa"))),tableBodyCreate(region),colorCountry()}"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js");